@model IEnumerable<MovieDemo.Models.Movie>

<h2 style="text-align:center; margin-bottom:20px;">Movie List</h2>

<form method="get" style="text-align:center; margin-bottom:20px;">
    @* Search Input *@
    <input type="text" name="search" placeholder="Search by title or director" value="@ViewBag.Search" style="padding:5px; width:250px;" />

    @* Category Filter Dropdown *@
    <select name="genreId" style="padding:5px; margin-left:10px;">
        <option value="">All Categories</option>
        @if (ViewBag.Genres != null)
        {
            @foreach (var genre in (IEnumerable<MovieDemo.Models.Genre>)ViewBag.Genres)
            {
                        <option value="@genre.Id" selected="@(ViewBag.SelectedGenre != null && (int)ViewBag.SelectedGenre == genre.Id)">
                    @genre.Name
                        </option>
            }
        }
    </select>

    <button type="submit" style="padding:5px 10px; margin-left:10px;">Filter</button>
</form>

<div style="display:flex; flex-wrap:wrap; gap:20px; justify-content:center; max-height:80vh; overflow-y:auto; padding:10px; border:1px solid #ccc; border-radius:10px;">
    @foreach (var movie in Model)
    {
            <div style="width:200px; border:1px solid #ccc; padding:10px; text-align:center; background:#f7f7f7; border-radius:10px; box-shadow:0 2px 5px rgba(0,0,0,0.2);">
            @* Poster Image *@
                <img src="@movie.PosterUrl" style="width:100%; height:300px; object-fit:cover; border-radius:8px;" alt="@movie.Title" />

                <h3 style="margin:10px 0 5px 0;">@movie.Title</h3>

                <p style="margin: 5px 0;"><b>Director:</b> @movie.Director</p>

            @* Genres Display *@
                <p style="font-size:0.9em; color:#007bff; margin: 5px 0;">
                    <b>Genres:</b> @string.Join(", ", movie.Genres.Select(g => g.Name))
                </p>

            @* Summary Display *@
                <p style="font-size:0.85em; color:#333; height: 60px; overflow: hidden; text-overflow: ellipsis;">
                @movie.Summary
                </p>
            </div>
    }
</div>